(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8170],{88170:function(e,t,s){"use strict";s.r(t);var n=s(85893),r=s(46068),i=s(84714),c=s.n(i),_=s(94184),o=s.n(_),u=s(70696),l=s(67294),b=s(8771),a=s(82106),d=s(61658),S=s(81034),p=s(91473);let h=e=>{let{pageType:t,className:s,metafields:i,locale:_,data:h,slug:m}=e,x=null,{footerSetting:y={},footerMenu:g={},copywriting:v,footerCountry:f={},preRender:j={}}=i,[E,N]=(0,l.useState)(!1),[T,k]=(0,l.useState)(""),[w,H]=(0,l.useState)(!0),[B,C]=(0,l.useState)(""),[L,I]=(0,l.useState)(!1),[M,R]=(0,l.useState)(!1),D=(0,l.useRef)(null),F=e=>{let{type:t,error:s}=e;C(s||v[t]||"unknown error"),x&&clearTimeout(x),x=setTimeout(()=>{C("")},3e3)},Z=async()=>{if(H(!0),z)return A(!1),null;if(!T)return F({type:"fillEmail"});if(!b.b.email.test(T))return F({type:"errEmail"});if(!L)return R(!0),F({type:"agreePolicy"});N(!0);let{register_source:e}=(0,u.m1)(),s=await (0,a.Z)({locale:_,action:"footer_subscribe",url:"/api/multipass/account/subscribe_emails",method:"POST",body:{email:T,register_source:e,brand:d.cg,deals_type:(null==h?void 0:h.deals_type)||"footer_sub",sub_brand_type:"powerStation"==t?"anker_powerhouse":""}});N(!1),s.errors?(R(!1),F({error:s.errors||s.statusText})):(F({type:"footerSuccess"}),k(""),H(!1),A(!0),R(!1),(0,S.RC)({event:"uaEvent",eventCategory:"subscribe",eventAction:"footer",page_group:"Home Page".concat("charger"==t?"":"_pps"),eventLabel:m}),(0,S.RC)({event_parameters:null}),(0,S.RC)({event:"ga4Event",event_name:"subscribe",event_parameters:{page_group:"Home Page".concat("charger"==t?"":"_pps"),positon:"footer"}}))},P={show:{opacity:1,transition:{duration:.3,stiffness:400,damping:40,delay:.5}},hidden:{opacity:0,transition:{duration:.3,stiffness:20,damping:2}}},[z,A]=(0,l.useState)(!1);return(0,n.jsx)(n.Fragment,{children:!(null==j?void 0:j.hideHomeSubscribe)&&(0,n.jsxs)(p.E.section,{layout:!0,className:o()(c().subScribe_layer,"layer"),children:[(0,n.jsx)(r.Z,{source:null==h?void 0:h.bgUrl,className:c().subScribe_img}),(0,n.jsx)(p.E.div,{layout:!0,className:o()(c().subScribe_content,"content"),children:(0,n.jsx)("div",{className:"md_layer_grid",children:(0,n.jsxs)("div",{className:"md_content_grid",children:[(0,n.jsxs)(p.E.div,{className:c().title_grid,children:["powerStation"!==t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.E.p,{layout:!0,className:c().subScribe_content_subTitle,dangerouslySetInnerHTML:{__html:null==h?void 0:h.subTitle}}),(0,n.jsx)(p.E.p,{layout:!0,className:c().subScribe_content_title,dangerouslySetInnerHTML:{__html:null==h?void 0:h.title}})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.E.p,{layout:!0,className:o()(c().subScribe_content_title,c().subScribe_content_title_pps),dangerouslySetInnerHTML:{__html:null==h?void 0:h.title}}),(0,n.jsx)(p.E.p,{layout:!0,className:o()(c().subScribe_content_subTitle,c().subScribe_content_subTitle_pps),dangerouslySetInnerHTML:{__html:null==h?void 0:h.subTitle}})]}),(null==h?void 0:h.chosen)&&(0,n.jsx)(p.E.p,{layout:!0,className:o()(c().subScribe_content_subTitle,c().subScribe_content_chosen),dangerouslySetInnerHTML:{__html:null==h?void 0:h.chosen}})]}),(0,n.jsx)(p.E.div,{className:c().subScribe_content_btnBox_grid,children:(0,n.jsxs)(p.E.div,{layout:!0,className:c().subScribe_content_btnBox,children:[(0,n.jsx)(p.E.input,{layout:!0,type:"email",value:T,onChange:e=>{var t;return k(null===(t=e.target.value)||void 0===t?void 0:t.trim())},className:c().subScribe_content_input,placeholder:null==h?void 0:h.placeholder}),(0,n.jsxs)(p.E.button,{ref:D,layout:!0,type:"submit",onClick:Z,disabled:E,className:c().subScribe_content_btn,animate:z?"show":"",variants:{show:{width:"100%",borderRadius:"39px",transition:{duration:.5}}},children:[(0,n.jsx)(p.E.p,{layout:!0,dangerouslySetInnerHTML:{__html:null==h?void 0:h.btnText},variants:P,className:"absolute w-full h-full top-0 left-0 pl-[36px] pr-[36px]",animate:z?"hidden":"show"}),z&&(0,n.jsx)(p.E.p,{layout:!0,variants:P,inherit:!0,animate:z?"show":"hidden",className:"absolute w-full h-full top-0 left-0 pl-[36px] pr-[36px]",dangerouslySetInnerHTML:{__html:null==h?void 0:h.successBtnText}})]})]})}),(0,n.jsx)(p.E.div,{className:o()(c().policy_box,{[c().shake_box]:M}),children:(0,n.jsxs)(p.E.label,{children:[(0,n.jsx)(p.E.span,{className:c().checkoutBox,children:(0,n.jsx)(p.E.input,{className:c().checkout,type:"checkbox",checked:L,onChange:e=>I(e.target.checked)})}),(0,n.jsx)(p.E.span,{dangerouslySetInnerHTML:{__html:null==h?void 0:h.tips}})]})}),(0,n.jsx)(p.E.p,{className:"".concat(c().form_error," ").concat(w?c().error:c().success),style:{opacity:B?1:0},children:B})]})})})]})})};t.default=h},8771:function(e,t,s){"use strict";s.d(t,{b:function(){return n}});let n={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}},84714:function(e){e.exports={subScribe_content_title:"Subscribe_subScribe_content_title__1FVsi",title_grid:"Subscribe_title_grid__40Kts",subScribe_layer:"Subscribe_subScribe_layer__7q836",subScribe_content_btn:"Subscribe_subScribe_content_btn__ynMez",subScribe_content_btnBox_grid:"Subscribe_subScribe_content_btnBox_grid__Wn4Dw",subScribe_content_btnBox:"Subscribe_subScribe_content_btnBox__oSxDj",subScribe_content_input:"Subscribe_subScribe_content_input__a71xg",subScribe_content:"Subscribe_subScribe_content__XD_Or",form_error:"Subscribe_form_error__wrEID",policy_box:"Subscribe_policy_box__LNsZa",subScribe_img:"Subscribe_subScribe_img__U8V8L",error:"Subscribe_error__oNIpy",success:"Subscribe_success__jBv_C",shake_box:"Subscribe_shake_box__wGjlS",shake:"Subscribe_shake__Hfjqw",checkoutBox:"Subscribe_checkoutBox__f535n",checkout:"Subscribe_checkout__hHRQr",subScribe_content_subTitle:"Subscribe_subScribe_content_subTitle__YCWpe",subScribe_content_chosen:"Subscribe_subScribe_content_chosen__d_DjF",subScribe_content_title_pps:"Subscribe_subScribe_content_title_pps__0fcwd",subScribe_content_subTitle_pps:"Subscribe_subScribe_content_subTitle_pps__Em32X"}}}]);
//# sourceMappingURL=8170.0ba64451725663c6.js.map